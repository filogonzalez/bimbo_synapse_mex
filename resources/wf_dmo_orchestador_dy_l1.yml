resources:
  jobs:
    wf_dmo_orchestador_dy_l1:
      name: wf_dmo_orchestador_dy_l1
      schedule:
        quartz_cron_expression: 32 0 7 * * ?
        timezone_id: America/Mexico_City
        pause_status: UNPAUSED
      tasks:
        - task_key: Stored_Procedures_Creation
          notebook_task:
            notebook_path: ../ADF-DV-DNA-BM-EUS2-Stored_Procedures.py
            source: WORKSPACE
        - task_key: RTM_DMO_L1
          depends_on:
            - task_key: Stored_Procedures_Creation
          pipeline_task:
            pipeline_id: ${resources.pipelines.rtm_dmo_l1.id}
            full_refresh: false
        - task_key: RTM_DMO_L2_historical_tables_creation
          depends_on:
            - task_key: RTM_DMO_L1
          notebook_task:
            notebook_path: ../RTM_DMO_L2_hist.py
            source: WORKSPACE
        - task_key: RTM_DMO_L2
          depends_on:
            - task_key: RTM_DMO_L2_historical_tables_creation
          pipeline_task:
            pipeline_id: ${resources.pipelines.rtm_dmo_l2.id}
            full_refresh: false
        - task_key: RTM_DMO_L2_StoredProc_Exec
          depends_on:
            - task_key: RTM_DMO_L2
          notebook_task:
            notebook_path: ../RTM_DMO_L2_SP_call.py
            source: WORKSPACE
        - task_key: RTM_DMO_L3
          depends_on:
            - task_key: RTM_DMO_L2_StoredProc_Exec
          pipeline_task:
            pipeline_id: ${resources.pipelines.rtm_dmo_l3.id}
            full_refresh: false
        - task_key: RTM_DMO_RolCatalogo
          depends_on:
            - task_key: RTM_DMO_L3
          notebook_task:
            notebook_path: ../RTM_DMO_RolCatalogo.py
            source: WORKSPACE
      queue:
        enabled: true
      performance_target: PERFORMANCE_OPTIMIZED
